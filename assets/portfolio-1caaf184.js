import{_ as I}from"./BalStack.vue_vue_type_script_lang-b46da6b4.js";import{aV as z,aW as G,av as ue,aw as H,aq as E,au as J,bJ as de,aR as me,aT as pe}from"./BalBtn-a3a093af.js";import{_ as R}from"./PoolsTable.vue_vue_type_script_setup_true_lang-5e80dfa7.js";import{a2 as _e,u as W,R as fe,N as ke,c as K,a3 as q}from"./connector-d867b6ec.js";import{u as Y}from"./usePoolsQuery-a683b142.js";import{i as U}from"./useQueryHelpers-8fe10019.js";import{x as X}from"./index-c7e2fe85.js";import{a as Z}from"./user-data.provider-5f113b17.js";import{q as r,v as ee,r as C,ah as oe,p as ve,d as N,b as m,c as x,l as S,y as v,A as y,D as e,h as k,x as L,E as te,f as T,o as he,F as ge}from"./runtime-core.esm-bundler-24a2b16f.js";import{u as Q}from"./useLock-29f6f05a.js";import{i as ye}from"./useVeBAL-c380e517.js";import{_ as se}from"./StakePreviewModal.vue_vue_type_script_setup_true_lang-6f08d9d6.js";import{_ as Pe}from"./BalModal-3bc137a6.js";import{p as ne}from"./pool-staking.provider-7a0c7e0f.js";import{_ as be}from"./BalAlert-48dfe2e8.js";import{u as Se,N as F}from"./cross-chain-sync.provider-ae200010.js";import{_ as xe}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-24e44890.js";import"./useDarkMode-2a25fc5b.js";import"./browser-6a4b4883.js";import"./_commonjsHelpers-87174ba5.js";import"./metamask.connector-ad3cfd34.js";import"./pools-b19f9d28.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./BalTable.vue_vue_type_style_index_0_lang-50d2b6b3.js";import"./BalTooltip.vue_vue_type_style_index_0_lang-b52dcfa5.js";import"./BalAssetSet-ca8ea95f.js";import"./BalAsset-402797b2.js";import"./Avatar.vue_vue_type_script_setup_true_lang-75ff433f.js";import"./tailwind.config-93ced0cc.js";import"./usePoolWarning-e429f343.js";import"./StarsIcon.vue_vue_type_script_setup_true_lang-68ec2428.js";import"./useTailwind-d0408df9.js";import"./useBreakpoints-06419e03.js";import"./TokenPills.vue_vue_type_script_setup_true_lang-10b51951.js";import"./index-4d33cff6.js";import"./api-069228f5.js";import"./errors-e4e66976.js";import"./usePoolQuery-86625f8c.js";import"./BalActionSteps.vue_vue_type_script_setup_true_lang-1ae0de8c.js";import"./wallet-logos-eb0836bb.js";import"./anime.es-de4e5aa0.js";import"./useTransactions-19512b92.js";import"./index-27a66705.js";import"./events-5f626723.js";import"./readable-browser-744f1df3.js";import"./immutable-2b056f5a.js";import"./index-1de0572e.js";import"./promise-5e82c3ab.js";import"./BalCircle-ccce1514.js";import"./BalDataListRow.vue_vue_type_script_setup_true_lang-8d6041f8.js";import"./BalLink-6d436d10.js";import"./useTokenApprovalActions-7a65b699.js";const we=()=>{const{userGaugeSharesQuery:u,userBoostsQuery:o,stakedSharesQuery:n}=Z(),{data:a}=u,{data:l}=o,{data:t}=n,i=r(()=>a.value?a.value.map(_=>_.gauge.poolId):[]),s=r(()=>i.value.length>0),c=Y(C([]),ee({enabled:s}),{poolIds:i,pageSize:999}),{data:d,refetch:f}=c,p=r(()=>{var _;return((_=d.value)==null?void 0:_.pages[0].pools)||[]}),P=r(()=>Object.keys(t.value||{}).reduce((_,g)=>{var h;const b=p.value.find($=>$.id===g);if(!b)return _;const A=((h=t==null?void 0:t.value)==null?void 0:h[g])||"0";return _+Number(X(b,A))},0).toString()),w=r(()=>U(u)||U(n)||U(o)||U(c));function V(_){var g;return((g=t==null?void 0:t.value)==null?void 0:g[_])||"0"}return{stakedPools:p,stakedShares:t,poolBoostsMap:l,totalStakedValue:P,isLoading:w,refetchStakedPools:f,stakedSharesFor:V}},ae=Symbol(G.Providers.UserStaking);function Be(){const u=we();return oe(ae,u),u}function Le(){return z(ae)}const $e=u=>{const{stakedPools:o,totalStakedValue:n,refetchStakedPools:a,isLoading:l}=u,{userPoolSharesQuery:t,lockQuery:i}=Z(),{data:s,refetch:c}=t,{totalLockedValue:d}=Q(),{injectTokens:f}=ue(),p=r(()=>Object.keys(s.value||{})),P=r(()=>p.value.length>0),w=Y(C([]),ee({enabled:P}),{poolIds:p,pageSize:999}),{data:V}=w,_=r(()=>{var B;return((B=V.value)==null?void 0:B.pages[0].pools)||[]}),g=r(()=>[..._.value,...o.value]),b=r(()=>Object.keys(s.value||{}).reduce((B,M)=>{var O;const D=g.value.find(ce=>ce.id===M);if(!D)return B;const ie=((O=s==null?void 0:s.value)==null?void 0:O[M])||"0";return B+Number(X(D,ie))},0).toString()),A=r(()=>_e([b.value,n.value,d.value]).toString()),h=r(()=>l.value||U(t)||U(w)||ye.value&&U(i));async function $(){await Promise.all([c(),a()])}return ve(g,B=>{f(B.map(M=>M.address))}),{stakedPools:o,unstakedPools:_,userPoolShares:s,totalFiatValue:A,isLoading:h,refetchAllUserPools:$}},le=Symbol(G.Providers.UserPools);function Ce(u){oe(le,$e(u))}function j(){return z(le)}const Ne={class:"flex flex-col text-left"},Ve=v("p",{class:"mb-5 whitespace-pre-line"}," The sync veBAL operation needs to be performed on Ethereum Mainnet, since that is where your veBAL balance lives. ",-1),Ue={class:"mb-5 whitespace-pre-line"},re=N({__name:"ProceedToSyncModal",props:{isVisible:{type:Boolean}},emits:["close"],setup(u){const{networkId:o,getNetworkSlug:n}=W();return(a,l)=>{const t=H;return m(),x(Pe,{ref:"redirectModal",show:u.isVisible,onClose:l[1]||(l[1]=i=>a.$emit("close"))},{header:S(()=>[v("h3",null,y(a.$t("modals.veBalRedirectModal.title")),1)]),default:S(()=>[v("div",Ne,[Ve,v("p",Ue," Ethereum Mainnet to "+y(e(fe)[e(o)].chainName)+" will enable you to get boosted APR’s for any pools where you stake in the new boost-aware gauges. ",1),k(t,{label:"Go to Ethereum Mainnet",color:"gradient",onClick:l[0]||(l[0]=i=>a.$router.push({name:"vebal",params:{networkSlug:e(n)(e(ke).MAINNET)}}))})])]),_:1},8,["show"])}}}),Ae={class:"flex items-center"},Me={class:"flex-[2]"},Te={key:0,class:"flex flex-1 justify-end"},Ee=N({__name:"PortfolioSyncTip",emits:["showProceedModal"],setup(u){const{networksSyncState:o,tempSyncingNetworks:n,l2VeBalBalances:a,isLoading:l}=Se(),{networkId:t}=W(),{account:i}=E(),s=r(()=>{var p;if(l.value)return null;const c=o.value[t.value];if(c===F.Unsynced&&!!n.value[i.value]&&n.value[i.value].networks.includes(t.value))return Number((p=a.value)==null?void 0:p[t.value])>0?{title:"Resync if you acquire new veBAL",text:"Newly acquired veBAL doesn’t auto-sync to L2s. Remember to resync on Ethereum Mainnet after acquiring more veBAL to continue boosting to your max."}:{title:"Sync your veBAL to maximize your boost",text:"If you have veBAL, sync your veBAL balance from Ethereum Mainnet to max your boost while staking on Arbitrum. Resync after acquiring more veBAL to continue boosting to your max."};if(c===F.Synced)return{title:"Trigger pool gauge updates to get your boosts",text:"Pool gauges don’t automatically recognize changes in veBAL until triggered. Updates are triggered when you interact with a gauge (e.g. by claiming BAL, stake/unstake or explicitly update the gauge on each individual pool page)",hideBtn:!0}});return(c,d)=>{const f=H,p=be;return e(s)?(m(),x(p,{key:0,title:e(s).title,type:"tip",class:"mb-5 w-100"},{default:S(()=>[v("div",Ae,[v("div",Me,y(e(s).text),1),e(s).hideBtn?T("",!0):(m(),L("div",Te,[k(f,{color:"gradient",onClick:d[0]||(d[0]=P=>c.$emit("showProceedModal"))},{default:S(()=>[te(" Sync veBAL ")]),_:1})]))])]),_:1},8,["title"])):T("",!0)}}}),Ie={class:"px-4 xl:px-0"},Re=N({__name:"StakedPoolsTable",setup(u){const o=C(!1),n=C(),a=C(!1);ne();const{stakedPools:l,poolBoostsMap:t,stakedShares:i,isLoading:s}=Le(),{refetchAllUserPools:c}=j(),{isWalletReady:d,isWalletConnecting:f}=E(),{t:p}=J(),P=K.network.shortName,w=r(()=>d.value||f.value?p("noStakedInvestments",[P]):p("connectYourWallet")),V=r(()=>{const h=["poolVolume","migrate","lockEndDate","volume"];return q.value||h.push("myBoost"),h}),_=r(()=>JSON.stringify(l.value));function g(h){o.value=!0,n.value=h}function b(){c(),o.value=!1}async function A(){await c()}return(h,$)=>{const B=I;return m(),L("div",null,[k(B,{vertical:"",spacing:"sm"},{default:S(()=>[v("h5",Ie,y(h.$t("staking.stakedPools")),1),k(Ee,{onShowProceedModal:$[0]||($[0]=M=>a.value=!0)}),(m(),x(R,{key:e(_),data:e(l),shares:e(i),boosts:e(t),poolsType:"staked",noPoolsLabel:e(w),hiddenColumns:e(V),sortColumn:"myBalance",isLoading:e(d)&&e(s),showPoolShares:"",showActions:"",showBoost:e(q),onTriggerUnstake:g},null,8,["data","shares","boosts","noPoolsLabel","hiddenColumns","isLoading","showBoost"]))]),_:1}),e(n)?(m(),x(se,{key:0,pool:e(n),isVisible:e(o),action:"unstake",onClose:b,onSuccess:A},null,8,["pool","isVisible"])):T("",!0),k(re,{isVisible:e(a),onClose:$[1]||($[1]=M=>a.value=!1)},null,8,["isVisible"])])}}}),We={class:"px-4 xl:px-0"},Qe=N({__name:"UnstakedPoolsTable",setup(u){const o=C(!1),n=C(),a=K.network.shortName,l=["poolVolume","migrate","lockEndDate","volume"];ne();const{isWalletReady:t,isWalletConnecting:i}=E(),{t:s}=J(),{unstakedPools:c,userPoolShares:d,refetchAllUserPools:f,isLoading:p}=j(),P=r(()=>t.value||i.value?s("noUnstakedInvestments",[a]):s("connectYourWallet")),w=r(()=>JSON.stringify(c.value));function V(b){o.value=!0,n.value=b}function _(){f(),o.value=!1}async function g(){await f()}return he(()=>{f()}),(b,A)=>{const h=I;return m(),L("div",null,[k(h,{vertical:"",spacing:"sm"},{default:S(()=>[v("h5",We,y(b.$t("staking.unstakedPools")),1),(m(),x(R,{key:e(w),isLoading:e(t)&&e(p),data:e(c),shares:e(d),noPoolsLabel:e(P),sortColumn:"myBalance",hiddenColumns:l,showPoolShares:"",showActions:"",onTriggerStake:V},null,8,["isLoading","data","shares","noPoolsLabel"]))]),_:1}),e(n)?(m(),x(se,{key:0,pool:e(n),isVisible:e(o),action:"stake",onClose:_,onSuccess:g},null,8,["pool","isVisible"])):T("",!0)])}}}),je={class:"px-4 xl:px-0"},De=N({__name:"VeBalPoolTable",props:{lockPool:null,lock:null},setup(u){const o=u,{totalLockedShares:n}=Q(),a=r(()=>{var s,c,d;return o.lockPool?[{...o.lockPool,lockedEndDate:(s=o.lock)!=null&&s.hasExistingLock&&!((c=o.lock)!=null&&c.isExpired)?(d=o.lock)==null?void 0:d.lockedEndDate:void 0}]:[]}),l=r(()=>({[o.lockPool.id]:n.value})),t=r(()=>JSON.stringify(a.value)),i=["poolVolume","migrate","actions","myBoost"];return(s,c)=>{const d=I;return m(),L("div",null,[k(d,{vertical:"",spacing:"sm"},{default:S(()=>[v("h5",je,y(s.$t("veBalProtocolLiquidity")),1),(m(),x(R,{key:e(t),data:e(a),shares:e(l),hiddenColumns:i,sortColumn:"myBalance",showPoolShares:""},null,8,["data","shares"]))]),_:1})])}}}),Oe=N({__name:"HeroConnectWalletButton",setup(u){const{startConnectWithInjectedProvider:o}=E(),{trackGoal:n,Goals:a}=de();function l(){o(),n(a.ClickHeroConnectWallet)}return(t,i)=>(m(),L("div",{class:"text-3xl font-semibold text-center xl:text-left text-pink-400 cursor-pointer",onClick:l},y(t.$t("walletDisconnected")),1))}}),qe={class:"flex flex-col justify-between"},Fe={class:"mt-5 xl:mt-0 font-light text-center xl:text-left"},ze={class:"font-medium"},Ge={key:1,class:"mb-1 text-3xl font-semibold text-center xl:text-left text-orange-400"},He=N({__name:"PortfolioPageHero",setup(u){const o=C(!1),{fNum:n}=me(),{isWalletReady:a,isWalletConnecting:l}=E(),{totalFiatValue:t,isLoading:i}=j(),{networkConfig:s}=W(),c=r(()=>n(t.value,pe.fiat)),d=r(()=>i.value);return(f,p)=>{const P=xe;return m(),L("div",qe,[v("h1",Fe,[te(y(f.$t("mySobalBalance"))+" ",1),v("span",ze,y(e(s).chainName),1)]),e(a)||e(l)?(m(),L(ge,{key:0},[e(d)?(m(),x(P,{key:0,class:"mx-auto xl:mx-0 w-40 h-10",white:""})):(m(),L("div",Ge,y(e(c)),1))],64)):(m(),x(Oe,{key:1})),k(re,{isVisible:e(o),onClose:p[0]||(p[0]=w=>o.value=!1)},null,8,["isVisible"])])}}});const Je={class:"xl:px-4 pt-10 md:pt-12 xl:mx-auto"},Ke={class:"px-4 xl:px-0"},Ko=N({__name:"portfolio",setup(u){const o=Be();Ce(o);const{lockPool:n,lock:a}=Q();return(l,t)=>{const i=I;return m(),L("div",null,[k(He),v("div",Je,[k(i,{vertical:""},{default:S(()=>[v("div",Ke,[k(i,{horizontal:"",justify:"between",align:"center"},{default:S(()=>[v("h3",null,y(l.$t("myLiquidityInBalancerPools")),1)]),_:1})]),k(i,{vertical:"",spacing:"2xl"},{default:S(()=>{var s;return[k(Qe),k(Re),e(n)&&Number((s=e(a))==null?void 0:s.lockedAmount)>0?(m(),x(De,{key:0,lock:e(a),lockPool:e(n)},null,8,["lock","lockPool"])):T("",!0)]}),_:1})]),_:1})])])}}});export{Ko as default};
//# sourceMappingURL=portfolio-1caaf184.js.map
