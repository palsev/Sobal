import{_ as te}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-24e44890.js";import{at as q,ao as O}from"./BalBtn-a3a093af.js";import{S as M}from"./connector-d867b6ec.js";import{d as N,b as a,x as i,F as g,i as w,B as f,c as C,l as p,e as $,aq as z,m as Q,D as r,A as T,I as le,y as d,f as R,h as U,r as S,al as ae,q as L,o as se,p as ne,C as E,as as K,ar as P,E as G}from"./runtime-core.esm-bundler-24a2b16f.js";import{_ as re}from"./BalStack.vue_vue_type_script_lang-b46da6b4.js";const J=N({__name:"BalTableRow",props:{columns:null,onRowClick:null,data:null,link:null,href:null,sticky:null,isColumnStuck:{type:Boolean},pinned:{type:Boolean}},setup(e){const k=e;function s(c,o=!1){var n;(n=k.link)!=null&&n.to||k.onRowClick&&k.onRowClick(c,o)}function y(c){return c!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}return(c,o)=>(a(),i("tr",{class:f(["bg-white z-10 row-bg group",{"cursor-pointer":s,"border-b dark:border-gray-700":e.pinned}]),onClick:[o[0]||(o[0]=q(n=>s(e.data),["exact"])),o[1]||(o[1]=q(n=>s(e.data,!0),["meta"])),o[2]||(o[2]=q(n=>s(e.data,!0),["ctrl"]))]},[(a(!0),i(g,null,w(e.columns,(n,h)=>{var x,v;return a(),i("td",{key:n.id,class:f([n.align==="right"?"text-left":"text-right",y(h),e.isColumnStuck?"isSticky":""])},[(a(),C(le((x=e.href)!=null&&x.getHref(e.data)?"a":e.link?"router-link":"div"),{to:e.link?{name:e.link.to,params:e.link.getParams(e.data)}:null,href:(v=e.href)==null?void 0:v.getHref(e.data)},{default:p(()=>[n.Cell?$(c.$slots,n.Cell,z(Q({key:0},e.data))):(a(),i("div",{key:1,class:f(r(M.compact)(["mr-6 py-4",n.align==="right"?"text-right":"text-left",n.cellClassName]))},T(typeof n.accessor=="string"?e.data[n.accessor]:n.accessor(e.data)),3))]),_:2},1032,["to","href"]))],2)}),128))],2))}}),ie=d("span",{class:"font-semibold text-left"}," Total ",-1),oe=[ie],ue=N({__name:"TotalsRow",props:{isColumnStuck:{type:Boolean},onRowClick:null,sticky:null,columns:null},setup(e){const k=e;function s(y){return y!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}return(y,c)=>(a(),i("tbody",null,[d("tr",{class:f(["bg-white z-10 row-bg group",{"cursor-pointer":!!k.onRowClick}])},[d("td",{class:f([s(0),e.isColumnStuck?"isSticky":"","text-left p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900 align-top"])},oe,2),(a(!0),i(g,null,w(r(M.tail)(e.columns),(o,n)=>(a(),i("td",{key:o.id,class:f([o.align==="right"?"text-left":"text-right",s(n+1),e.isColumnStuck?"isSticky":"","p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900"])},[o.totalsCell?$(y.$slots,o.totalsCell,{key:0}):R("",!0)],2))),128))],2)]))}}),de="/assets/pin-78d7f97c.svg",ce={class:"px-6 pt-4 pb-2"},fe=["src"],ke=d("span",{class:"text-secondary text-medium"},"Pinned",-1),ye=N({__name:"PinHeader",setup(e){return(k,s)=>{const y=re;return a(),i("tr",null,[d("td",ce,[U(y,{horizontal:"",spacing:"sm"},{default:p(()=>[d("img",{src:r(de)},null,8,fe),ke]),_:1})])])}}}),he={class:"w-full whitespace-normal table-fixed"},ge={class:"z-10 bg-white dark:bg-gray-900"},ve=["onClick"],we={key:1},be={class:"text-base"},Ce={key:1,class:"flex justify-start items-center p-6 max-w-full h-24 bg-white dark:bg-gray-850 row-bg text-secondary"},me={key:2,class:"w-full whitespace-normal table-fixed striped"},ze=N({__name:"BalTable",props:{columns:null,data:null,isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},skeletonClass:{default:""},onRowClick:null,sticky:null,square:{type:Boolean,default:!1},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""},link:{default:null},href:{default:null},initialState:{default:()=>({sortColumn:null,sortDirection:null})},pin:null,getTableRowClass:{type:Function,default:()=>""},isOnlyDescSort:{type:Boolean,default:!1},renderedRowsIdx:null},emits:["loadMore","onColumnSort"],setup(e,{emit:k}){var F,A;const s=e,y=S(),c=S(!1),o=S(s.data),n=S(((F=s.initialState)==null?void 0:F.sortDirection)||null),h=S(((A=s.initialState)==null?void 0:A.sortColumn)||null),x=S(),v=S(),X=ae(s,"getTableRowClass"),Y=L(()=>M.sumBy(s.columns,"width")),V=l=>l!==0?"":s.sticky==="horizontal"||s.sticky==="both"?"horizontalSticky":"",j=(l,b=!0)=>{const B=s.columns.find(u=>u.id===l);if(!(B!=null&&B.sortKey))return;l!==h.value&&(n.value=null),h.value=l,b&&Z(),l&&n.value&&k("onColumnSort",l);const t=M.sortBy(s.data.value||s.data,B.sortKey);if(n.value==="asc"){o.value=t;return}if(n.value==="desc"){o.value=t.reverse();return}o.value=s.data};function Z(){if(s.isOnlyDescSort){n.value="desc";return}if(n.value===null){n.value="desc";return}if(n.value==="desc"){n.value="asc";return}n.value=null}function I(l){switch(l){case"left":return"justify-start";case"right":return"justify-end";case"center":return"justify-center";default:return"justify-start"}}se(()=>{v.value&&(v.value.onscroll=()=>{if(v.value&&y.value){const l=v.value.offsetWidth/y.value.offsetWidth/10;c.value=y.value.offsetLeft>y.value.offsetWidth*l}},v.value.addEventListener("scroll",()=>{v.value&&x.value&&(x.value.scrollLeft=v.value.scrollLeft)})),j(h.value,!1)});const _=L(()=>s.pin?(o.value||[]).filter(l=>{var b;return!((b=s.pin)!=null&&b.pinnedData.includes(l[s.pin.pinOn]))}):o.value),W=L(()=>s.pin?(o.value||[]).filter(l=>{var b;return(b=s.pin)==null?void 0:b.pinnedData.includes(l[s.pin.pinOn])}):[]),m=L(()=>s.columns.filter(l=>!l.hidden)),ee=L(()=>s.columns.some(l=>l.totalsCell!==void 0));return ne(()=>s.data,l=>{if(h.value&&n.value!==null){j(h.value,!1);return}o.value=l}),(l,b)=>{const B=te;return a(),i(g,null,[d("div",{class:f(["max-w-full whitespace-nowrap overflow-hidden border border-gray-800",{"rounded-lg":!e.square}])},[d("div",{ref_key:"headerRef",ref:x,class:"overflow-hidden"},[d("table",he,[d("colgroup",null,[(a(!0),i(g,null,w(r(m),t=>(a(),i("col",{key:t.id,style:E({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),d("thead",ge,[(a(!0),i(g,null,w(r(m),(t,u)=>(a(),i("th",{key:`header-${t.id}`,ref_for:!0,ref:u==0?"stickyHeaderRef":void 0,class:f(["p-6 bg-white dark:bg-gray-850 headingShadow border-b dark:border-gray-900",t.className,V(u),r(c)?"isSticky":"",t.sortKey&&!(s.isOnlyDescSort&&r(h)===t.id)?"cursor-pointer":"",t.sortKey&&r(h)!==t.id?"text-gray-800 hover:text-purple-600 focus:text-blue-500 dark:text-gray-100 dark:hover:text-yellow-500 dark:focus:text-yellow-500 transition-colors":"",r(h)===t.id&&r(n)?"text-blue-600 hover:text-blue-500 focus:text-purple-600 dark:text-blue-400 dark:hover:text-blue-600 dark:focus:text-blue-600 transition-colors":""]),onClick:H=>j(t.id)},[d("div",{class:f(["flex",I(t.align)])},[t.Header?$(l.$slots,t.Header,z(Q({key:0},t))):(a(),i("div",we,[d("h5",be,T(t.name),1)])),r(h)===t.id&&r(n)==="asc"?(a(),C(O,{key:2,name:"arrow-up",size:"sm",class:"flex items-center ml-1"})):R("",!0),r(h)===t.id&&r(n)==="desc"?(a(),C(O,{key:3,name:"arrow-down",size:"sm",class:"flex items-center ml-1"})):R("",!0)],2)],10,ve))),128))])])],512),d("div",{ref_key:"bodyRef",ref:v,class:"overflow-auto"},[e.isLoading?(a(),C(B,{key:0,class:f([e.skeletonClass,"min-w-full"]),square:"",style:E({width:`${r(Y)}px`})},null,8,["class","style"])):!e.isLoading&&!r(o).length?(a(),i("div",Ce,T(e.noResultsLabel||l.$t("noResults")),1)):(a(),i("table",me,[d("colgroup",null,[(a(!0),i(g,null,w(r(m),t=>(a(),i("col",{key:t.id,style:E({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),d("tr",null,[(a(!0),i(g,null,w(r(m),(t,u)=>(a(),i("td",{key:t.id,class:f([t.align==="right"?"text-left":"text-right",V(u),r(c)?"isSticky":"","bg-white dark:bg-gray-850 p-0 m-0 h-0"])},null,2))),128))]),r(W).length?(a(),C(ye,{key:0})):R("",!0),(a(!0),i(g,null,w(r(W),(t,u)=>(a(),C(J,{key:`tableRow-${t.id??u}`,class:f(r(X)(t,u)),data:t,columns:r(m),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:r(c),pinned:""},K({_:2},[w(l.$slots,(H,D)=>({name:D,fn:p(()=>[$(l.$slots,D,z(P(t)))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"]))),128)),(a(!0),i(g,null,w(r(_),(t,u)=>(a(),i(g,{key:`tableRow-${t.id??u}`},[!e.renderedRowsIdx||u<=e.renderedRowsIdx?(a(),C(J,{key:0,class:f(s.getTableRowClass?s.getTableRowClass(t,u):void 0),data:t,columns:r(m),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:r(c)},K({default:p(()=>[$(l.$slots,"named",z(P(t)))]),_:2},[w(l.$slots,(H,D)=>({name:D,fn:p(()=>[$(l.$slots,D,z(P(t)))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"])):R("",!0)],64))),128)),!e.isLoading&&r(o).length&&r(ee)?(a(),C(ue,{key:1,columns:r(m),onRowClick:e.onRowClick,sticky:e.sticky,isColumnStuck:r(c)},K({_:2},[w(l.$slots,(t,u)=>({name:u,fn:p(H=>[$(l.$slots,u,z(P(H)))])}))]),1032,["columns","onRowClick","sticky","isColumnStuck"])):R("",!0)]))],512)],2),e.isPaginated&&!e.isLoading?(a(),i("div",{key:0,class:"bal-table-pagination-btn text-secondary",onClick:b[0]||(b[0]=t=>!e.isLoadingMore&&l.$emit("loadMore"))},[e.isLoadingMore?(a(),i(g,{key:0},[G(T(l.$t("loading")),1)],64)):(a(),i(g,{key:1},[G(T(l.$t("loadMore"))+" ",1),U(O,{name:"chevron-down",size:"sm",class:"ml-2"})],64))])):R("",!0)],64)}}});export{ze as _};
//# sourceMappingURL=BalTable.vue_vue_type_style_index_0_lang-50d2b6b3.js.map
