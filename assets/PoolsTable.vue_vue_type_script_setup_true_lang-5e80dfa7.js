import{at as L,aw as U,au as H,ao as se,aR as ne,bB as ae,bJ as ie}from"./BalBtn-a3a093af.js";import{_ as le}from"./BalTable.vue_vue_type_style_index_0_lang-50d2b6b3.js";import{_ as z}from"./BalTooltip.vue_vue_type_style_index_0_lang-b52dcfa5.js";import{_ as re}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-24e44890.js";import{_ as R}from"./BalAssetSet-ca8ea95f.js";import{u as ce}from"./tailwind.config-93ced0cc.js";import{u as de,a as ue,_ as me,b as ke,P as ge}from"./usePoolWarning-e429f343.js";import{u as fe}from"./useBreakpoints-06419e03.js";import{u as he}from"./useDarkMode-2a25fc5b.js";import{u as O,a8 as F,ak as ye,Z as pe,al as q,a9 as _e,c as ve}from"./connector-d867b6ec.js";import{u as Ce,n as be,o as W,q as xe,j as w,r as we,s as Be,v as Pe,x as Te,y as Se,b as $e,z as V,A as Le,C as Ne}from"./index-c7e2fe85.js";import{d as S,al as ze,q as B,b as a,x as k,D as n,c as m,l as u,E as P,A as p,f as v,y as T,h as b,F as Re,B as Ae}from"./runtime-core.esm-bundler-24a2b16f.js";import{_ as Ie}from"./TokenPills.vue_vue_type_script_setup_true_lang-10b51951.js";import{P as E}from"./pools-b19f9d28.js";import{f as Me}from"./index-4d33cff6.js";const De={class:"flex justify-center py-4 px-2"},Fe={key:4},qe=S({__name:"PoolsTableActionsCell",props:{pool:null,poolsType:{default:"unstaked"}},emits:["click:stake","click:unstake","click:migrate"],setup(o,{emit:r}){const i=o,{isMigratablePool:d}=Ce(ze(i,"pool")),{networkSlug:g}=O(),l=B(()=>F.Stakable.VotingGaugePools.concat(F.Stakable.AllowList)),h=B(()=>be(i.pool.id));return(c,y)=>{const f=U;return a(),k("div",De,[n(d)(o.pool)?(a(),m(f,{key:0,color:"gradient",size:"sm",onClick:y[0]||(y[0]=L(x=>r("click:migrate",o.pool),["prevent","stop"]))},{default:u(()=>[P(p(c.$t("migrate")),1)]),_:1})):o.poolsType==="unstaked"&&n(l).includes(o.pool.id)?(a(),m(f,{key:1,color:"gradient",size:"sm",disabled:n(d)(o.pool),onClick:y[1]||(y[1]=L(x=>r("click:stake",o.pool),["prevent","stop"]))},{default:u(()=>[P(p(c.$t("stake")),1)]),_:1},8,["disabled"])):o.poolsType==="staked"?(a(),m(f,{key:2,class:"dark:text-gray-300 dark:border-gray-300",outline:"",size:"sm",onClick:y[2]||(y[2]=L(x=>r("click:unstake",o.pool),["prevent","stop"]))},{default:u(()=>[P(p(c.$t("unstake")),1)]),_:1})):n(h)?(a(),m(f,{key:3,tag:"router-link",to:{name:"get-vebal",query:{networkSlug:n(g),returnRoute:c.$route.name,returnParams:JSON.stringify({networkSlug:n(g)})}},color:"gradient-pink-yellow",size:"sm"},{default:u(()=>[P(p(c.$t("transactionAction.createLock")),1)]),_:1},8,["to"])):(a(),k("div",Fe,"-"))])}}}),Ve="/assets/tokens_white-ab4831a1.svg",Ee="/assets/tokens_black-a3f5db98.svg",Ue={neon:new URL("/assets/neon-e65cc2e7.svg",self.location).href},He={"data-testid":"incentivised-chip",class:"flex relative items-center py-1 pr-1.5 pl-2 mr-3 max-h-10 bg-gradient-to-tr from-green-500 to-pink-500 rounded"},Oe={class:"text-xs font-semibold text-white"},We=S({__name:"IncentivizedChip",props:{metadata:null},setup(o){var h;const r=o,i=((h=r.metadata)==null?void 0:h.incentiveProtocols)||[],d=i.map(c=>Ue[c]),g=i.length>0,l=20+(d.length-1)*16;return(c,y)=>{var x,$;const f=R;return a(),k("div",He,[g?(a(),m(f,{key:0,logoURIs:n(d),width:l,size:16,ringSize:1},null,8,["logoURIs"])):v("",!0),T("span",Oe,p((x=r.metadata)!=null&&x.incentivizedButtonText?($=r.metadata)==null?void 0:$.incentivizedButtonText:c.$t("incentivized")),1)])}}}),je={"data-testid":"boosted-chip",class:"flex relative items-center py-1 pr-1.5 pl-2 mr-3 max-h-10 bg-gradient-to-tr from-yellow-500 to-pink-500 rounded"},Ke={class:"text-xs font-semibold text-white"},Ge=S({__name:"BoostedChip",props:{metadata:null},setup(o){var h;const i=((h=o.metadata)==null?void 0:h.boostedProtocols)||[],d=i.map(c=>ye[c]),g=i.length>0,l=20+(d.length-1)*16;return(c,y)=>{const f=R;return a(),k("div",je,[g?(a(),m(f,{key:0,logoURIs:n(d),width:l,size:16,ringSize:1},null,8,["logoURIs"])):v("",!0),T("span",Ke,p(c.$t("boosted")),1)])}}}),Je={class:"text-sm text-left"},Ye=S({__name:"PoolWarningTooltip",props:{pool:null},setup(o){const r=o,i=B(()=>r.pool.id),{t:d}=H(),{isAffectedBy:g}=de(i),l=B(()=>W(r.pool)?d("deprecatedPool.tooltip"):g(E.PoolProtocolFeeVulnWarning)?d(`poolWarnings.${E.PoolProtocolFeeVulnWarning}.tooltip`):"");return(h,c)=>{const y=se,f=z;return n(l)?(a(),m(f,{key:0,class:"mb-1 ml-2 text-red-500",name:"alert-circle",filled:"",size:"md"},{activator:u(()=>[b(y,{class:"mt-1",name:"alert-triangle",size:"md"})]),default:u(()=>[T("div",Je,p(n(l)),1)]),_:1})):v("",!0)}}}),Ze={class:"flex flex-wrap"},Qe=S({__name:"PoolsTableExtraInfo",props:{pool:null},setup(o){return(r,i)=>{var l,h,c;const d=z,g=me;return a(),k("div",Ze,[n(xe)(o.pool)?(a(),m(d,{key:0,text:r.$t("boostedTooltip"),width:"56"},{activator:u(()=>[b(Ge,{metadata:n(w)(o.pool.id),class:"ml-1"},null,8,["metadata"])]),_:1},8,["text"])):v("",!0),n(we)(o.pool)?(a(),m(d,{key:1,text:(l=n(w)(o.pool.id))!=null&&l.incentivizedHoverText?(h=n(w)(o.pool.id))==null?void 0:h.incentivizedHoverText:r.$t("incentivizedTooltip"),width:"56"},{activator:u(()=>[b(We,{metadata:n(w)(o.pool.id),class:"ml-1"},null,8,["metadata"])]),_:1},8,["text"])):v("",!0),n(Be)(o.pool.poolType)?(a(),m(g,{key:2,label:"LBP",color:"amber",class:"text-xs font-medium"})):(c=o.pool)!=null&&c.isNew?(a(),m(ue,{key:3,class:"my-2 text-lg font-medium"})):v("",!0),b(Ye,{pool:o.pool},null,8,["pool"])])}}}),Xe={class:"flex items-center"},et=["src"],tt=["src"],ot=["data-testid"],st={key:0,class:"flex flex-wrap-reverse items-center py-1 px-6"},nt={key:0,class:"pr-2 text-left"},at={key:1},it={key:1,class:"text-right"},lt={class:"flex justify-center py-4 px-2"},rt={class:"py-4 px-6 text-right"},wt=S({__name:"PoolsTable",props:{data:{default:()=>[]},poolsType:{default:"unstaked"},isLoading:{type:Boolean},isLoadingMore:{type:Boolean,default:!1},showPoolShares:{type:Boolean,default:!1},noPoolsLabel:{default:"No pools"},isPaginated:{type:Boolean,default:!1},sortColumn:{default:"totalLiquidity"},selectedTokens:{default:()=>[]},hiddenColumns:{default:()=>[]},showBoost:{type:Boolean,default:!1},showActions:{type:Boolean,default:!1},columnStates:{default:()=>({})},skeletonClass:{default:"h-64"},shares:null,boosts:null},emits:["loadMore","triggerStake","triggerUnstake","onColumnSort"],setup(o,{emit:r}){const i=o,{fNum:d}=ne(),g=ce(),{t:l}=H(),{trackGoal:h,Goals:c}=ie(),{darkMode:y}=he(),{upToLargeBreakpoint:f,upToSmallBreakpoint:x}=fe(),{networkSlug:$}=O(),j=B(()=>x.value?300:400),K=B(()=>[{name:"Icons",id:"icons",accessor:"uri",Header:"iconColumnHeader",Cell:"iconColumnCell",width:80,noGrow:!0},{name:l("composition"),id:"poolName",accessor:"id",Cell:"poolNameCell",width:i.hiddenColumns.length>=2?j.value:400},{name:l("myBoost"),accessor:e=>`${pe(N(e)).toFixed(3)}x`,align:"right",id:"myBoost",hidden:!i.showBoost,sortKey:e=>Number(N(e)),width:150,cellClassName:"font-numeric"},{name:l("myBalance"),accessor:e=>d(I(e),{style:"currency",maximumFractionDigits:0,fixedFormat:!0}),align:"right",id:"myBalance",hidden:!i.showPoolShares,sortKey:e=>Number(I(e)),width:160,cellClassName:"font-numeric"},{name:l("poolValue"),accessor:e=>d(e.totalLiquidity||0,{style:"currency",maximumFractionDigits:0}),align:"right",id:"totalLiquidity",sortKey:e=>{const s=Number(e.totalLiquidity);return s===1/0||isNaN(s)?0:s},width:150,cellClassName:"font-numeric"},{name:l("volume24h",[l("hourAbbrev")]),accessor:e=>(e==null?void 0:e.volumeSnapshot)||"0",align:"right",id:"volume",Cell:"volumeCell",sortKey:e=>{const s=Number(e==null?void 0:e.volumeSnapshot);return s===1/0||isNaN(s)||s>q?0:s},width:155,cellClassName:"font-numeric"},{name:i.showPoolShares?l("myApr"):l("apr"),Cell:"aprCell",accessor:e=>{var s;return((s=e==null?void 0:e.apr)==null?void 0:s.min.toString())||"0"},align:"right",id:"apr",sortKey:e=>{var _;let s=0;return e!=null&&e.apr&&(s=Number(Pe(e.apr,e.boost))),isFinite(s)&&(((_=e.apr)==null?void 0:_.swapFees)||0)<_e?s:0},width:110},{name:l("expiryDate"),Cell:"lockEndDateCell",accessor:"lockedEndDate",align:"right",id:"lockEndDate",width:150},{name:l("migrate"),Cell:"migrateCell",accessor:"migrate",align:"center",id:"migrate",width:150},{name:l("actions"),Cell:"actionsCell",accessor:"actions",align:"center",id:"actions",hidden:!i.showActions,width:150}]),G=B(()=>K.value.filter(e=>!i.hiddenColumns.includes(e.id)));function J(e,s){h(c.ClickPoolsTableRow);const _=g.resolve({name:"pool",params:{id:e.id,networkSlug:$}});s?window.open(_.href):g.push(_)}function A(e){var s;g.push({name:"migrate-pool",params:{from:e.id,to:(s=ve.network.pools.Migrations)==null?void 0:s[e.id].toPoolId},query:{returnRoute:"home"}})}function I(e){var _;const s=((_=i==null?void 0:i.shares)==null?void 0:_[e.id])||"0";return Te(e,s)}function N(e){var s;return e.boost||((s=i==null?void 0:i.boosts)==null?void 0:s[e.id])||"1"}function Y(e){const s=e==null?void 0:e.apr;return s?Le(s,N(e)):"0"}function Z(e){return e?Me(e,ge):"â€”"}function Q(e){var s;return(s=w(e.id))!=null&&s.hasIcon?[e.address]:Ne(e)}return(e,s)=>{const _=R,M=re,X=z,ee=U,te=le,oe=ae;return a(),m(oe,{shadow:"lg",square:n(f),noBorder:n(f),noPad:""},{default:u(()=>[b(te,{columns:n(G),data:o.data,noResultsLabel:o.noPoolsLabel,isLoading:o.isLoading,isLoadingMore:o.isLoadingMore,skeletonClass:o.skeletonClass,sticky:"both",square:n(f),onRowClick:J,isPaginated:o.isPaginated,isOnlyDescSort:"",initialState:{sortColumn:o.sortColumn,sortDirection:"desc"},onOnColumnSort:s[0]||(s[0]=t=>r("onColumnSort",t)),onLoadMore:s[1]||(s[1]=t=>r("loadMore"))},{iconColumnHeader:u(()=>[T("div",Xe,[n(y)?(a(),k("img",{key:0,src:n(Ve),alt:"token",loading:"lazy",width:"29",height:"18"},null,8,et)):(a(),k("img",{key:1,src:n(Ee),alt:"token",loading:"lazy",width:"29",height:"18"},null,8,tt))])]),iconColumnCell:u(t=>[o.isLoading?v("",!0):(a(),k("div",{key:0,class:"py-4 px-6","data-testid":t==null?void 0:t.id},[b(_,{addresses:Q(t),width:100},null,8,["addresses"])],8,ot))]),poolNameCell:u(t=>{var C,D;return[o.isLoading?v("",!0):(a(),k("div",st,[(C=n(w)(t.id))!=null&&C.name?(a(),k("div",nt,p((D=n(w)(t.id))==null?void 0:D.name),1)):(a(),k("div",at,[b(Ie,{tokens:n(Se)(t,t.tokens),isStablePool:n($e)(t.poolType),selectedTokens:o.selectedTokens,pickedTokens:o.selectedTokens},null,8,["tokens","isStablePool","selectedTokens","pickedTokens"])])),b(Qe,{pool:t},null,8,["pool"])]))]}),volumeCell:u(t=>[(a(),k("div",{key:o.columnStates.volume,class:"flex justify-end py-4 px-6 -mt-1 font-numeric"},[t!=null&&t.volumeSnapshot?(a(),k("span",it,p(n(d)((t==null?void 0:t.volumeSnapshot)<n(q)&&(t==null?void 0:t.volumeSnapshot)!=="0"?t==null?void 0:t.volumeSnapshot:"-",{style:"currency",maximumFractionDigits:0})),1)):(a(),m(M,{key:0,class:"w-12 h-4"}))]))]),aprCell:u(t=>[(a(),k("div",{key:o.columnStates.aprs,class:Ae(["flex justify-end py-4 px-6 -mt-1 font-numeric text-right",{"text-gray-300 dark:text-gray-600 line-through":n(V)(t.poolType)}])},[t!=null&&t.apr?(a(),k(Re,{key:1},[P(p(Y(t))+" ",1),n(V)(t.poolType)?(a(),m(X,{key:0,width:"36",text:e.$t("lbpAprTooltip"),iconSize:"sm",iconClass:"ml-1"},null,8,["text"])):t!=null&&t.apr?(a(),m(ke,{key:1,pool:t},null,8,["pool"])):v("",!0)],64)):(a(),m(M,{key:0,class:"w-12 h-4"}))],2))]),migrateCell:u(t=>[T("div",lt,[n(W)(t)?(a(),m(ee,{key:0,color:"gradient",size:"sm",onClick:L(C=>A(t),["prevent"])},{default:u(()=>[P(p(e.$t("migrate")),1)]),_:2},1032,["onClick"])):v("",!0)])]),lockEndDateCell:u(t=>[T("div",rt,p(Z(t.lockedEndDate)),1)]),actionsCell:u(t=>[b(qe,{pool:t,poolsType:o.poolsType,"onClick:stake":C=>r("triggerStake",C),"onClick:unstake":C=>r("triggerUnstake",C),"onClick:migrate":C=>A(C)},null,8,["pool","poolsType","onClick:stake","onClick:unstake","onClick:migrate"])]),_:1},8,["columns","data","noResultsLabel","isLoading","isLoadingMore","skeletonClass","square","isPaginated","initialState"])]),_:1},8,["square","noBorder"])}}});export{wt as _};
//# sourceMappingURL=PoolsTable.vue_vue_type_script_setup_true_lang-5e80dfa7.js.map
