import{au as ie,av as le,aq as ce,aZ as ue,aY as de,ao as me,bB as pe}from"./BalBtn-a3a093af.js";import{_ as fe}from"./BalTooltip.vue_vue_type_style_index_0_lang-b52dcfa5.js";import{c as F,f as he,_ as _e,a as ge}from"./coingecko.service-cbc4f60f.js";import{_ as ve}from"./BalLoadingBlock.vue_vue_type_style_index_0_lang-24e44890.js";import{c as ye}from"./coingecko-514b8e81.js";import{S as g}from"./connector-d867b6ec.js";import{u as xe}from"./useSwapState-9610c199.js";import{u as ke}from"./useBreakpoints-06419e03.js";import{u as we}from"./useTailwind-d0408df9.js";import{f as Be}from"./index-4d33cff6.js";import{d as Te,r as V,q as o,v as Pe,b as s,x as d,D as t,c as v,l as D,y as r,A as y,f as x,h as M,E as U,F as Se,B as De,G as Ae,H as be}from"./runtime-core.esm-bundler-24a2b16f.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";const Ce=a=>(Ae("data-v-dd84ef7d"),a=a(),be(),a),Ne={class:"relative p-4 lg:p-0 h-full bg-transparent"},Ie={key:0,class:"flex justify-center items-center w-full h-40"},Le={class:"text-sm text-gray-400"},Ge={key:1,class:"flex justify-center items-center w-full h-full"},He={class:"text-sm text-center text-gray-400"},qe={key:2,class:"flex-col"},Ee={class:"-mt-2 lg:mt-2"},Fe=Ce(()=>r("img",{class:"h-5",src:ye},null,-1)),Ve=Te({__name:"PairPriceGraph",props:{landing:{type:Boolean,default:!1},chain:{default:""},height:{default:"120"},hideTooltip:{type:Boolean,default:!1}},setup(a){const Y=a;async function j(e,P,f,h,l,S){let c=e===f?h:e,u=P===f?h:P;S&&([c,u]=[u,c]);const H=l<=90?"hour":"day",te=F.prices.getTokensHistorical([c],l,1,H),ae=F.prices.getTokensHistorical([u],l,1,H),[se,q]=await Promise.all([te,ae]),oe=g.mapValues(se,(E,_)=>q[_]?1/E[0]*q[_][0]:null),ne=g.pickBy(oe),re=g.mapKeys(ne,(E,_)=>Be(he(_/1e3),"yyyy/MM/dd HH:mm"));return g.toPairs(re)}const O=[{option:"1d",fulltext:"day",value:1},{option:"1w",fulltext:"week",value:7},{option:"1m",fulltext:"month",value:30},{option:"1y",fulltext:"1 day",value:365},{option:"All",fulltext:"&infin;",value:4e3}],{upToLargeBreakpoint:k}=ke(),{t:z}=ie(),{getToken:A,wrappedNativeAsset:b,nativeAsset:m}=le(),{tokenInAddress:i,tokenOutAddress:n,initialized:K}=xe(),$=we(),{chainId:Q,appNetworkConfig:C}=ce(),W=V(Number(Y.height)),p=V(O[1]),w=o(()=>{var e;return i.value===""?"Unknown":(e=A(i.value))==null?void 0:e.symbol}),B=o(()=>{var e;return n.value===""?"Unknown":(e=A(n.value))==null?void 0:e.symbol}),{isLoading:N,data:I,error:T}=ue(de.Tokens.PairPriceData(i,n,p,Q,m,b),()=>{var e;return j(i.value,n.value,m==null?void 0:m.address,(e=b.value)==null?void 0:e.address,p.value.value,!0)},Pe({enabled:K,retry:!1,refetchOnWindowFocus:!1})),R=[[C.tokens.Addresses.wNativeAsset,C.tokens.Addresses.nativeAsset]],L=o(()=>R.some(e=>e.includes(i.value)&&e.includes(n.value))),G=o(()=>L.value?[]:[{name:`${B.value}/${w.value}`,values:I.value||[]}]),X=o(()=>L.value?`${w.value} -> ${B.value} is 1:1`:z("noData")),Z=o(()=>{const e=I.value||[];return e.length>2&&e[e.length-1][1]<e[0][1]}),J=o(()=>{let e=$.theme.colors.lime[400];return Z.value&&(e=$.theme.colors.red[400]),[e]}),ee=o(()=>({left:"2.5%",right:"0",top:"10%",bottom:"15%",containLabel:!1}));return(e,P)=>{const f=ve,h=me,l=_e,S=ge,c=fe,u=pe;return s(),d("div",null,[t(N)?(s(),v(f,{key:0,class:"h-40"})):(s(),v(u,{key:1,square:t(k),shadow:"none",hFull:"",growContent:"",noPad:"",background:!1,noBorder:t(k)},{default:D(()=>[r("div",Ne,[t(T)&&t(n)?(s(),d("div",Ie,[r("span",Le,y(e.$t("insufficientData")),1)])):x("",!0),t(T)&&!t(n)?(s(),d("div",Ge,[r("span",He,y(e.$t("chooseAPair")),1)])):x("",!0),!t(T)&&!t(N)?(s(),d("div",qe,[t(G).length===0?(s(),v(l,{key:0,class:"mt-4 h-40"},{default:D(()=>[M(h,{name:"bar-chart"}),U(" "+y(t(X)),1)]),_:1})):(s(),d(Se,{key:1},[M(S,{data:t(G),height:t(W),showLegend:!1,color:t(J),customGrid:t(ee),axisLabelFormatter:{yAxis:{maximumSignificantDigits:6,fixedFormat:!0}},wrapperClass:"flex flex-row lg:flex-col flex-row",showTooltip:!t(k)&&!a.landing,chartType:"line",hideYAxis:"",hideXAxis:"",showHeader:"",useMinMax:"",inputSym:t(w),outputSym:t(B),timespan:t(p).fulltext,landing:a.landing},null,8,["data","height","color","customGrid","showTooltip","inputSym","outputSym","timespan","landing"]),r("div",Ee,[r("span",{class:De(["flex justify-end w-full text-sm text-gray-500",{"pr-4":a.landing}])},[U(y(t(p).option)+" ",1),a.hideTooltip?x("",!0):(s(),v(c,{key:0,class:"ml-2",text:e.$t("coingeckoPricingTooltip")},{activator:D(()=>[Fe]),_:1},8,["text"]))],2)])],64))])):x("",!0)])]),_:1},8,["square","noBorder"]))])}}});const Je=$e(Ve,[["__scopeId","data-v-dd84ef7d"]]);export{Je as P};
//# sourceMappingURL=PairPriceGraph-a70d4eaf.js.map
