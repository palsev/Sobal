import{_ as Z}from"./BalModal-3bc137a6.js";import{av as ee,au as se,ao as te,aw as oe,bK as ne}from"./BalBtn-a3a093af.js";import{T as le,a as ae,_ as ce}from"./TokenListsListItem-06129f32.js";import{S as ie}from"./connector-d867b6ec.js";import{u as re}from"./token-lists.provider-5bfd7ae9.js";import{u as ue}from"./Avatar.vue_vue_type_script_setup_true_lang-75ff433f.js";import{b as de}from"./index.esm-d983ad6e.js";import{d as fe,v as me,q as p,p as pe,al as ke,ap as _e,j as ye,b as t,c as y,l as m,y as o,h as u,f as j,A as h,D as i,x as a,F as g,i as C}from"./runtime-core.esm-bundler-24a2b16f.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";const ge={class:"flex justify-between items-center w-full"},ve={class:"flex items-center"},Te={class:"text-xs text-secondary"},xe={class:"flex items-center ml-2"},be={class:"mr-1"},Le=["src"],we={class:"flex px-4 pt-2 pb-3 mr-2"},Be={class:"flex justify-center items-center w-8 h-full"},je={key:0,class:"overflow-y-scroll list-height"},Ce=["textContent"],Ie={class:"flex px-4 pt-2 pb-3 mr-2"},Se={class:"flex justify-center items-center w-8 h-full"},qe={class:"overflow-hidden"},Ae=["onClick"],Ve={key:1,class:"flex justify-center items-center h-96"},$e=["textContent"],ze=fe({__name:"SelectTokenModal",props:{open:{type:Boolean,default:!1},excludedTokens:{default:()=>[]},subset:{default:()=>[]},includeEther:{type:Boolean,default:!1},disableInjection:{type:Boolean,default:!1},hideTokenLists:{type:Boolean,default:!1},ignoreBalances:{type:Boolean,default:!1}},emits:["close","selectTokenlist","select"],setup(v,{emit:T}){const d=v,e=me({loading:!1,selectTokenList:!1,query:"",results:{},focussedToken:0}),{activeTokenLists:I,approvedTokenLists:S,toggleTokenList:q,isActiveList:A}=re(),{getToken:V,searchTokens:x,priceFor:$,balanceFor:z,dynamicDataLoading:E,nativeAsset:F,injectTokens:N}=ee(),{t:b}=se(),{resolve:O}=ue(),M=p(()=>e.selectTokenList?b("manageLists"):b("tokenSearch")),L=p(()=>{const s=e.query.toLowerCase(),c=Object.entries(S.value).filter(([,f])=>f.name.toLowerCase().includes(s));return Object.fromEntries(c)}),k=p(()=>{const s=Object.values(e.results).map(n=>{const c=z(n.address),f=$(n.address),_=Number(c)*f;return{...n,price:f,balance:c,value:_}});return d.ignoreBalances?s:ie.orderBy(s,["value","balance"],["desc","desc"])}),w=p(()=>[...d.excludedTokens,...d.includeEther?[]:[F.address]]),U=p(()=>{console.log(e.results,e.focussedToken);const s=Object.keys(k.value)[e.focussedToken];return k.value[s].address});async function B(s){V(s)||await N([s]),T("select",s),T("close")}async function D(s){q(s),e.results=await x(e.query,{excluded:w.value,disableInjection:d.disableInjection,subset:d.subset})}function R(){e.selectTokenList=!1,e.query=""}function K(){e.selectTokenList=!e.selectTokenList,e.query=""}pe(ke(e,"query"),async s=>{e.loading=!0,e.results=await x(s,{excluded:w.value,disableInjection:d.disableInjection,subset:d.subset}).finally(()=>{e.loading=!1})},{immediate:!0});const{ArrowDown:P,ArrowUp:W,Enter:G,Tab:H}=de();return _e(()=>{P.value&&e.focussedToken<Object.keys(e.results).length&&e.focussedToken++,H.value&&e.focussedToken<Object.keys(e.results).length&&e.focussedToken++,W.value&&e.focussedToken>0&&e.focussedToken--,G.value&&B(U.value)}),(s,n)=>{const c=te,f=oe,_=ce,J=ye("RecycleScroller"),Q=ne,X=Z;return t(),y(X,{show:"",noContentPad:"",onClose:n[2]||(n[2]=l=>s.$emit("close"))},{header:m(()=>[o("div",ge,[o("div",ve,[e.selectTokenList?(t(),y(f,{key:0,color:"gray",size:"xs",class:"mr-2",flat:"",circle:"",onClick:R},{default:m(()=>[u(c,{name:"arrow-left",size:"sm"})]),_:1})):j("",!0),o("h5",null,h(i(M)),1)]),!e.selectTokenList&&!v.hideTokenLists?(t(),a("div",{key:0,class:"group flex items-center mr-2 cursor-pointer",onClick:K},[o("span",Te,h(s.$t("tokenLists")),1),o("div",xe,[o("span",be,[(t(!0),a(g,null,C(i(I),(l,r)=>(t(),a("img",{key:r,src:i(O)(l.logoURI||"/images/pixel.png"),class:"inline-block w-6 h-6 bg-white rounded-full shadow"},null,8,Le))),128))]),u(c,{name:"chevron-down",size:"sm",class:"ml-1 text-blue-500 group-hover:text-pink-500 group-focus:text-pink-500 dark:text-blue-400 transition-all duration-200 ease-out"})])])):j("",!0)])]),default:m(()=>[e.selectTokenList?(t(),a(g,{key:0},[o("div",we,[u(_,{modelValue:e.query,"onUpdate:modelValue":n[0]||(n[0]=l=>e.query=l),name:"tokenSearchInput",placeholder:s.$t("searchByName"),size:"sm",class:"w-full",autoFocus:""},{prepend:m(()=>[o("div",Be,[u(c,{name:"search",size:"sm",class:"mr-2 text-gray-500"})])]),_:1},8,["modelValue","placeholder"])]),o("div",null,[Object.keys(i(L)).length>0?(t(),a("div",je,[(t(!0),a(g,null,C(i(L),(l,r)=>(t(),y(le,{key:r,isActive:i(A)(r.toString()),tokenlist:l,uri:r,onToggle:Y=>D(r.toString())},null,8,["isActive","tokenlist","uri","onToggle"]))),128))])):(t(),a("div",{key:1,class:"flex justify-center items-center h-96",textContent:h(s.$t("errorNoLists"))},null,8,Ce))])],64)):(t(),a(g,{key:1},[o("div",Ie,[u(_,{modelValue:e.query,"onUpdate:modelValue":n[1]||(n[1]=l=>e.query=l),name:"tokenSearchInput",placeholder:s.$t("searchBy"),size:"sm",class:"w-full",autoFocus:""},{prepend:m(()=>[o("div",Se,[u(c,{name:"search",size:"sm",class:"mr-2 text-gray-500"})])]),_:1},8,["modelValue","placeholder"])]),o("div",qe,[i(k).length>0?(t(),y(J,{key:0,class:"overflow-y-scroll list-height",items:i(k),itemSize:70,keyField:"address",buffer:100},{default:m(({item:l,index:r})=>[o("a",{onClick:Y=>B(l.address)},[u(ae,{token:l,hideBalance:v.ignoreBalances,balanceLoading:i(E),focussed:r==e.focussedToken,tabIndex:"0"},null,8,["token","hideBalance","balanceLoading","focussed"])],8,Ae)]),_:1},8,["items"])):e.loading?(t(),a("div",Ve,[u(Q)])):(t(),a("div",{key:2,class:"p-12 h-96 text-center text-secondary",textContent:h(s.$t("errorNoTokens"))},null,8,$e))])],64))]),_:1})}}});const Pe=he(ze,[["__scopeId","data-v-d6ec4d96"]]);export{Pe as S};
//# sourceMappingURL=SelectTokenModal-d05a5195.js.map
